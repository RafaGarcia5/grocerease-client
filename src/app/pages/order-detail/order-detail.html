@if (order) {
  <main class="order-detail-container">
    
    <!-- Header -->
    <section class="order-container">
      <div class="order-header">
        <mat-icon class="order-status-icon" [ngClass]="'status ' + order.status">
          {{ getStatusIcon(order.status) }}
        </mat-icon>

        <div>
          <h2>Order #{{ order.id }}</h2>
          <p class="order-meta">
            <span>Status:</span> {{ order.status | titlecase }}
          </p>
          <p class="order-meta">
            <span>Date:</span> {{ order.order_date | date }}
          </p>
        </div>
      </div>

      <div class="order-total">
        <p><strong>Total:</strong> ${{ order.total }}</p>
      </div>
    </section>

    <!-- Items -->
    <section class="order-items">
      <h3>Items</h3>

      @for (detail of order.details; track detail.id) {
        <mat-card class="item-card">
          <mat-card-content class="item-card-details">
            <div class="order-header">
              <img src="assets/no-image.png" alt="product image" class="item-img"/>
              <p class="item-name">{{ detail.product.name }}</p>
            </div>
            <p class="item-info">{{ detail.pieces }} x ${{ detail.unit_price }}</p>
          </mat-card-content>
        </mat-card>
      }

    </section>

    <!-- Actions -->
    <section class="order-actions">
      <button matButton class="btn-cancel" (click)="cancelOrder()" 
              [disabled]="order.status === 'cancel'">
        Cancel Order
      </button>

      <button matButton="filled" (click)="updateOrder()"
              [disabled]="order.status === 'delivered'">
        Mark as Delivered
      </button>
    </section>
  </main>
}